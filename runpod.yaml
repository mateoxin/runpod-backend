# üöÄ RunPod Configuration for LoRA Dashboard Backend
# Pre-configured with secure token assembly

name: lora-dashboard-backend
image: your-registry/lora-dashboard-backend:latest

# üîß Container Configuration
container_config:
  image: ubuntu:22.04
  ports:
    - "8000:8000"
  environment:
    # Provide secrets via RunPod console, do not commit real values here
    HF_TOKEN: "${HF_TOKEN}"
    AWS_ACCESS_KEY_ID: "${AWS_ACCESS_KEY_ID}"
    AWS_SECRET_ACCESS_KEY: "${AWS_SECRET_ACCESS_KEY}"
    # S3 config
    S3_BUCKET: "${S3_BUCKET}"
    S3_REGION: "${S3_REGION}"
    S3_ENDPOINT_URL: "${S3_ENDPOINT_URL}"
    S3_PREFIX: "${S3_PREFIX}"
    # App config
    DEBUG: "false"
    MAX_CONCURRENT_JOBS: "10"

# üñ•Ô∏è GPU Configuration
gpu:
  count: 1
  type: ["NVIDIA A40", "NVIDIA RTX A6000", "NVIDIA A100"]

# üí∞ Scaling Configuration  
scaling:
  min_workers: 0
  max_workers: 10
  scale_down_delay: 300  # 5 minutes
  
# üöÄ Startup Configuration
startup:
  command: "python -u /rp_handler.py"
  timeout: 600  # 10 minutes

# üì¶ Build Configuration
build:
  dockerfile: "Dockerfile"
  context: "."